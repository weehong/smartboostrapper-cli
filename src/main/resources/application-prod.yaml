# =============================================================================
# Production Configuration
# =============================================================================
# Activate with: -Dspring.profiles.active=prod
# =============================================================================

server:
  port: ${SERVER_PORT:8080}

spring:
  application:
    name: ${APPLICATION_NAME:upmatches}

# =============================================================================
# SpringDoc Configuration - Disabled in production
# =============================================================================
springdoc:
  api-docs:
    enabled: false
  swagger-ui:
    enabled: false

# =============================================================================
# Application Configuration
# =============================================================================
app:
  logging:
    aspect:
      enabled: true
      slow-execution-threshold-ms: ${SLOW_EXECUTION_THRESHOLD:2000}
    loki:
      enabled: ${LOKI_ENABLED:true}
      url: ${LOKI_URL:http://loki:3100/loki/api/v1/push}
      batch-size: ${LOKI_BATCH_SIZE:1000}
      batch-timeout-ms: ${LOKI_BATCH_TIMEOUT:5000}
  tracing:
    enabled: ${TRACING_ENABLED:true}
    sampling-probability: ${TRACING_SAMPLING_PROBABILITY:0.1}

# =============================================================================
# Actuator Configuration
# =============================================================================
management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,metrics
  endpoint:
    health:
      show-details: when_authorized
  otlp:
    tracing:
      endpoint: ${TRACING_OTLP_ENDPOINT:http://tempo:4317}
  tracing:
    sampling:
      probability: ${TRACING_SAMPLING_PROBABILITY:0.1}
  metrics:
    tags:
      application: ${spring.application.name}

# =============================================================================
# Logging Configuration
# =============================================================================
logging:
  level:
    root: WARN
    com.upmatches: INFO
    org.springframework: WARN
    org.hibernate: WARN
